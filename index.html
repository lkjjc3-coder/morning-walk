<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ì•„ì¹¨ ì‚°ì±… ê¸°ë¡</title>
<style>
body {
  font-family: system-ui, sans-serif;
  background: #111;
  color: #fff;
  margin: 0;
  padding: 16px;
}

h1 {
  text-align: center;
  margin-bottom: 6px;
}

.subtitle {
  text-align: center;
  font-size: 14px;
  opacity: 0.8;
  margin-bottom: 20px;
}

nav {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 20px;
}

nav button {
  background: #222;
  color: #fff;
  border: none;
  padding: 8px 14px;
  border-radius: 20px;
  cursor: pointer;
}

nav button.active {
  background: #4caf50;
}

.section {
  display: none;
}

.section.active {
  display: block;
}

.upload-box {
  text-align: center;
  margin-bottom: 20px;
}

.gallery {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}

.card {
  background: rgba(0,0,0,0.4);
  border-radius: 12px;
  padding: 10px;
  margin: 10px;
  width: 220px;
}

.card img {
  width: 200px;
  border-radius: 10px;
  cursor: pointer;
}

.card textarea {
  width: 100%;
  margin-top: 6px;
}

.actions {
  display: flex;
  justify-content: space-between;
  margin-top: 6px;
}

.actions button {
  background: #333;
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 4px 8px;
  cursor: pointer;
}
</style>
</head>
<body>

<h1>ğŸŒ… ì•„ì¹¨ ì‚°ì±… ê¸°ë¡</h1>
<div class="subtitle">ì•„ì¹¨ ì‚°ì±…ì²˜ëŸ¼ ê°€ë³ê²Œ ë‚¨ê¸°ëŠ” ë‚˜ì˜ ê¸°ë¡</div>

<nav>
  <button class="active" onclick="switchTab('walk')">ì‚°ì±…í•˜ê¸°</button>
  <button onclick="switchTab('meditation')">ë¬µìƒí•˜ê¸°</button>
  <button onclick="switchTab('record')">ê¸°ë¡í•˜ê¸°</button>
</nav>

<div id="walk" class="section active"></div>
<div id="meditation" class="section"></div>
<div id="record" class="section"></div>

<script>
const sections = ['walk','meditation','record'];

function switchTab(tab) {
  sections.forEach(s => {
    document.getElementById(s).classList.remove('active');
  });
  document.getElementById(tab).classList.add('active');

  document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
  event.target.classList.add('active');
}

function initSection(key, title) {
  const container = document.getElementById(key);

  container.innerHTML = `
    <div class="upload-box">
      <h2>${title}</h2>
      <input type="file" accept="image/*" />
      <textarea placeholder="ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”"></textarea>
      <button>ì €ì¥</button>
    </div>
    <div class="gallery"></div>
  `;

  const input = container.querySelector('input');
  const text = container.querySelector('textarea');
  const saveBtn = container.querySelector('button');
  const gallery = container.querySelector('.gallery');

  let data = JSON.parse(localStorage.getItem(key) || '[]');

  saveBtn.onclick = () => {
    if (!input.files[0]) return alert('ì‚¬ì§„ì„ ì„ íƒí•˜ì„¸ìš”');
    const reader = new FileReader();
    reader.onload = e => {
      data.unshift({ img: e.target.result, text: text.value, likes: 0 });
      localStorage.setItem(key, JSON.stringify(data));
      input.value = '';
      text.value = '';
      render();
    };
    reader.readAsDataURL(input.files[0]);
  };

  function render() {
    gallery.innerHTML = '';
    data.forEach((item, i) => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <img src="${item.img}" />
        <div>${item.text || ''}</div>
        <div class="actions">
          <button onclick="like('${key}',${i})">ğŸ‘ ${item.likes}</button>
          <button onclick="del('${key}',${i})">ğŸ—‘</button>
        </div>
      `;
      gallery.appendChild(card);
    });
  }

  render();
}

function like(key, i) {
  const data = JSON.parse(localStorage.getItem(key));
  data[i].likes++;
  localStorage.setItem(key, JSON.stringify(data));
  location.reload();
}

function del(key, i) {
  if (!confirm('ì‚­ì œí• ê¹Œìš”?')) return;
  const data = JSON.parse(localStorage.getItem(key));
  data.splice(i,1);
  localStorage.setItem(key, JSON.stringify(data));
  location.reload();
}

initSection('walk','ì‚°ì±… ì‚¬ì§„ê³¼ ê¸°ë¡');
initSection('meditation','ë¬µìƒ ê¸°ë¡');
initSection('record','ì¼ìƒ ê¸°ë¡');
</script>

</body>
</html>
