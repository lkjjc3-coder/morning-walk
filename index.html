<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì•„ì¹¨ ì‚°ì±… ê¸°ë¡</title>

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: #111;
  color: #fff;
}

header {
  text-align: center;
  padding: 30px 10px 10px;
}

.subtitle {
  font-size: 14px;
  opacity: 0.8;
}

nav {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin: 20px 0;
}

nav button {
  background: #222;
  color: #fff;
  border: none;
  padding: 10px 18px;
  border-radius: 20px;
  cursor: pointer;
}

nav button.active {
  background: #4caf50;
}

.section {
  display: none;
  max-width: 800px;
  margin: 0 auto;
  padding: 16px;
}

.section.active {
  display: block;
}

.editor {
  background: #1c1c1c;
  padding: 16px;
  border-radius: 16px;
  margin-bottom: 20px;
}

.editor input,
.editor textarea {
  width: 100%;
  margin-bottom: 12px;
  background: #111;
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 10px;
}

.editor textarea {
  height: 120px;
  resize: vertical;
}

.editor button {
  width: 100%;
  background: #4caf50;
  border: none;
  color: #fff;
  padding: 12px;
  border-radius: 12px;
  font-size: 16px;
  cursor: pointer;
}

.preview {
  width: 100%;
  display: none;
  margin-bottom: 12px;
  border-radius: 12px;
}

.viewer {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 14px;
}

.card {
  background: rgba(255,255,255,0.05);
  border-radius: 14px;
  padding: 10px;
}

.card img {
  width: 100%;
  border-radius: 10px;
}

.card .text {
  font-size: 14px;
  margin: 8px 0;
  white-space: pre-wrap;
}

.card .date {
  font-size: 12px;
  opacity: 0.6;
  margin-bottom: 6px;
}
</style>
</head>

<body>

<header>
  <h1>ğŸŒ… ì•„ì¹¨ ì‚°ì±… ê¸°ë¡</h1>
  <div class="subtitle">ì•„ì¹¨ ì‚°ì±…ì²˜ëŸ¼ ê°€ë³ê²Œ ë‚¨ê¸°ëŠ” ë‚˜ì˜ ê¸°ë¡</div>
</header>

<nav>
  <button class="active" data-tab="walk">ì‚°ì±…í•˜ê¸°</button>
  <button data-tab="meditation">ë¬µìƒí•˜ê¸°</button>
  <button data-tab="record">ê¸°ë¡í•˜ê¸°</button>
</nav>

<div id="walk" class="section active"></div>
<div id="meditation" class="section"></div>
<div id="record" class="section"></div>

<script>
const tabs = document.querySelectorAll("nav button");
const sections = document.querySelectorAll(".section");

tabs.forEach(btn => {
  btn.onclick = () => {
    tabs.forEach(b => b.classList.remove("active"));
    sections.forEach(s => s.classList.remove("active"));
    btn.classList.add("active");
    document.getElementById(btn.dataset.tab).classList.add("active");
  };
});

function initSection(key, title) {
  const el = document.getElementById(key);

  el.innerHTML = `
    <div class="editor">
      <h2>${title}</h2>
      <input type="file" accept="image/*">
      <img class="preview">
      <textarea placeholder="ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”"></textarea>
      <button>ì €ì¥í•˜ê¸°</button>
    </div>
    <div class="viewer"></div>
  `;

  const fileInput = el.querySelector("input");
  const preview = el.querySelector(".preview");
  const textarea = el.querySelector("textarea");
  const saveBtn = el.querySelector("button");
  const viewer = el.querySelector(".viewer");

  let tempImage = null;
  let data = JSON.parse(localStorage.getItem(key) || "[]");

  fileInput.onchange = () => {
    const file = fileInput.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = e => {
      tempImage = e.target.result;
      preview.src = tempImage;
      preview.style.display = "block";
    };
    reader.readAsDataURL(file);
  };

  saveBtn.onclick = () => {
    if (!tempImage && !textarea.value.trim()) {
      alert("ì‚¬ì§„ì´ë‚˜ ê¸€ ì¤‘ í•˜ë‚˜ëŠ” ì…ë ¥í•˜ì„¸ìš”");
      return;
    }

    data.unshift({
      img: tempImage,
      text: textarea.value.trim(),
      date: new Date().toLocaleString()
    });

    localStorage.setItem(key, JSON.stringify(data));

    tempImage = null;
    preview.style.display = "none";
    preview.src = "";
    textarea.value = "";
    fileInput.value = "";

    render();
  };

  function render() {
    viewer.innerHTML = "";
    if (data.length === 0) {
      viewer.innerHTML = "<div style='opacity:.6'>ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>";
      return;
    }

    data.forEach(d => {
      const card = document.createElement("div");
      card.className = "card";

      if (d.img) {
        const img = document.createElement("img");
        img.src = d.img;
        card.appendChild(img);
      }

      const date = document.createElement("div");
      date.className = "date";
      date.textContent = d.date;

      const text = document.createElement("div");
      text.className = "text";
      text.textContent = d.text;

      card.append(date, text);
      viewer.appendChild(card);
    });
  }

  render();
}

initSection("walk", "ì‚°ì±…í•˜ê¸°");
initSection("meditation", "ë¬µìƒí•˜ê¸°");
initSection("record", "ê¸°ë¡í•˜ê¸°");
</script>

</body>
</html>
