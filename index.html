<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ì•„ì¹¨ ì‚°ì±… ê¸°ë¡</title>

<style>
body {
  font-family: system-ui, sans-serif;
  background:#111;
  color:#fff;
  margin:0;
  padding:16px;
}

h1 { text-align:center; margin-bottom:6px; }
.subtitle {
  text-align:center;
  font-size:14px;
  opacity:.8;
  margin-bottom:20px;
}

nav {
  display:flex;
  justify-content:center;
  gap:10px;
  margin-bottom:24px;
}
nav button {
  background:#222;
  color:#fff;
  border:none;
  padding:10px 18px;
  border-radius:24px;
  cursor:pointer;
}
nav button.active { background:#4caf50; }

.section { display:none; }
.section.active { display:block; }

.editor {
  max-width:760px;
  margin:0 auto 24px;
  background:#1c1c1c;
  padding:16px;
  border-radius:16px;
}

.preview {
  width:100%;
  max-height:360px;
  object-fit:contain;
  border-radius:12px;
  background:#000;
  margin:12px 0;
  display:none;
}

.editor textarea {
  width:100%;
  min-height:140px;
  background:#111;
  color:#fff;
  border:none;
  border-radius:12px;
  padding:12px;
  resize:vertical;
}

.editor button {
  width:100%;
  background:#4caf50;
  border:none;
  color:#fff;
  padding:12px;
  border-radius:12px;
  font-size:15px;
  cursor:pointer;
  margin-top:10px;
}

.viewer {
  max-width:900px;
  margin:0 auto;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
  gap:16px;
}

.card {
  background:rgba(255,255,255,0.05);
  border-radius:14px;
  padding:10px;
}
.card img {
  width:100%;
  border-radius:10px;
}
.card .text {
  font-size:14px;
  margin:8px 0;
  white-space:pre-wrap;
}
.actions {
  display:flex;
  justify-content:space-between;
}
.actions button {
  background:#333;
  border:none;
  color:#fff;
  border-radius:8px;
  padding:4px 10px;
  cursor:pointer;
}
</style>
</head>

<body>

<h1>ğŸŒ… ì•„ì¹¨ ì‚°ì±… ê¸°ë¡</h1>
<div class="subtitle">ì•„ì¹¨ ì‚°ì±…ì²˜ëŸ¼ ê°€ë³ê²Œ ë‚¨ê¸°ëŠ” ë‚˜ì˜ ê¸°ë¡</div>

<nav>
  <button class="active" data-tab="walk">ì‚°ì±…í•˜ê¸°</button>
  <button data-tab="meditation">ë¬µìƒí•˜ê¸°</button>
  <button data-tab="record">ê¸°ë¡í•˜ê¸°</button>
</nav>

<div id="walk" class="section active"></div>
<div id="meditation" class="section"></div>
<div id="record" class="section"></div>

<script>
document.addEventListener('DOMContentLoaded', () => {

const tabs = document.querySelectorAll('nav button');
const sections = document.querySelectorAll('.section');

tabs.forEach(btn => {
  btn.onclick = () => {
    tabs.forEach(b => b.classList.remove('active'));
    sections.forEach(s => s.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById(btn.dataset.tab).classList.add('active');
  };
});

function initSection(key, title) {
  const el = document.getElementById(key);
  el.innerHTML = `
    <div class="editor">
      <h2>${title}</h2>
      <input type="file" accept="image/*">
      <img class="preview">
      <textarea placeholder="ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”"></textarea>
      <button>ì €ì¥í•˜ê¸°</button>
    </div>
    <div class="viewer"></div>
  `;

  const input = el.querySelector('input');
  const preview = el.querySelector('.preview');
  const textarea = el.querySelector('textarea');
  const saveBtn = el.querySelector('button');
  const viewer = el.querySelector('.viewer');

  let data = JSON.parse(localStorage.getItem(key) || '[]');
  let tempImg = null;

  input.onchange = () => {
    const file = input.files[0];
    if (!file) return;
    const r = new FileReader();
    r.onload = e => {
      tempImg = e.target.result;
      preview.src = tempImg;
      preview.style.display = 'block';
    };
    r.readAsDataURL(file);
  };

  saveBtn.onclick = () => {
    if (!tempImg && !textarea.value.trim()) {
      alert('ì‚¬ì§„ì´ë‚˜ ê¸€ ì¤‘ í•˜ë‚˜ëŠ” ì…ë ¥í•´ì£¼ì„¸ìš”.');
      return;
    }

    data.unshift({
      img: tempImg,
      text: textarea.value.trim(),
      likes: 0,
      date: new Date().toISOString()
    });

    localStorage.setItem(key, JSON.stringify(data));

    tempImg = null;
    preview.style.display = 'none';
    textarea.value = '';
    input.value = '';

    render();
  };

  function render() {
    viewer.innerHTML = '';
    data.forEach(item => {
      const c = document.createElement('div');
      c.className = 'card';

      if (item.img) {
        const i = document.createElement('img');
        i.src = item.img;
        c.appendChild(i);
      }

      if (item.text) {
        const t = document.createElement('div');
        t.className = 'text';
        t.textContent = item.text;
        c.appendChild(t);
      }

      const a = document.createElement('div');
      a.className = 'actions';

      const like = document.createElement('button');
      like.textContent = `ğŸ‘ ${item.likes}`;
      like.onclick = () => {
        item.likes++;
        localStorage.setItem(key, JSON.stringify(data));
        render();
      };

      const del = document.createElement('button');
      del.textContent = 'ğŸ—‘';
      del.onclick = () => {
        if (confirm('ì‚­ì œí• ê¹Œìš”?')) {
          data = data.filter(d => d !== item);
          localStorage.setItem(key, JSON.stringify(data));
          render();
        }
      };

      a.append(like, del);
      c.appendChild(a);
      viewer.appendChild(c);
    });
  }

  render();
}

initSection('walk','ì‚°ì±…í•˜ê¸°');
initSection('meditation','ë¬µìƒí•˜ê¸°');
initSection('record','ê¸°ë¡í•˜ê¸°');

});
</script>

</body>
</html>
